## üîê Auth / Sessions (TODO)

| –ú–µ—Ç–æ–¥                                          | –û–ø–∏—Å–∞–Ω–∏–µ                        | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç                     |
| ---------------------------------------------- | ------------------------------- | ------------------------------ |
| `registerUser(handle, display_name, password)` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `User` –∏–ª–∏ –æ—à–∏–±–∫–∞              |
| `loginUser(handle, password)`                  | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Å—Å–∏—é     | `Session + User`               |
| `logoutUser(token)`                            | –£–¥–∞–ª—è–µ—Ç —Å–µ—Å—Å–∏—é –ø–æ —Ç–æ–∫–µ–Ω—É        | `void`                         |
| `validateSession(token)`                       | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–∞      | `User?` (null –µ—Å–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π) |
| `cleanupExpiredSessions()`                     | –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç—É—Ö—à–∏—Ö —Å–µ—Å—Å–∏–π       | `void`                         |

---

## üë§ Users (TODO)

| –ú–µ—Ç–æ–¥                                                              | –û–ø–∏—Å–∞–Ω–∏–µ                            | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç     |
| ------------------------------------------------------------------ | ----------------------------------- | -------------- |
| `getUserById(user_id)`                                             | –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID         | `User?`        |
| `getUserByHandle(handle)`                                          | –ü–æ–∏—Å–∫ –ø–æ @handle                    | `User?`        |
| `getUsersByIds(vector<id>)`                                        | Batch-–∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π        | `vector<User>` |
| `searchUsers(query, limit)`                                        | –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∏–º–µ–Ω–∏/handle | `vector<User>` |
| `updateUserProfile(user_id, display_name?, avatar?, description?)` | –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å                    | `bool`         |

---

## üí¨ Chats (TODO)

| –ú–µ—Ç–æ–¥                                                   | –û–ø–∏—Å–∞–Ω–∏–µ                                   | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç            |
| ------------------------------------------------------- | ------------------------------------------ | --------------------- |
| `getChatById(chat_id)`                                  | –ü–æ–ª—É—á–∏—Ç—å —á–∞—Ç –ø–æ ID                         | `Chat?`               |
| `getUserChats(user_id)`                                 | –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                  | `vector<ChatPreview>` |
| `getOrCreateDirectChat(user1_id, user2_id)`             | –ü–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –ª–∏—á–∫—É (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ!) | `Chat`                |
| `createGroupChat(name, creator_id, member_ids(vector<id>))`         | –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç                      | `Chat`                |
| `getChatMembers(chat_id)`                               | –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–∞—Ç–∞                     | `vector<ChatMember>`  |
| `addChatMember(chat_id, user_id, role)`                 | –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞                         | `bool`                |
| `removeChatMember(chat_id, user_id)`                    | –£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞                          | `bool`                |
| `updateMemberRole(chat_id, user_id, new_role)`          | –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞                    | `bool`                |
| `updateChatInfo(chat_id, name?, avatar?, description?)` | –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ —á–∞—Ç–∞                         | `bool`                |

### ChatPreview (TODO)

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö, —á–µ–º –ø—Ä–æ—Å—Ç–æ `Chat`:
- –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—Ç–µ–∫—Å—Ç, –≤—Ä–µ–º—è, –∞–≤—Ç–æ—Ä)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –î–ª—è –¥–∏—Ä–µ–∫—Ç–æ–≤: –¥–∞–Ω–Ω—ã–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞

---

## ‚úâÔ∏è Messages (TODO)

| –ú–µ—Ç–æ–¥                                                                | –û–ø–∏—Å–∞–Ω–∏–µ                      | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç        |
| -------------------------------------------------------------------- | ----------------------------- | ----------------- |
| `getMessageById(message_id)`                                         | –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ            | `Message?`        |
| `getChatMessages(chat_id, before_id?, limit)`                        | –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π   | `vector<Message>` |
| `sendMessage(chat_id, sender_id, text, reply_to_id?, forward_info?)` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ           | `Message`         |
| `editMessage(message_id, new_text)`                                  | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ       | `bool`            |
| `deleteMessage(message_id)`                                          | –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ             | `bool`            |
| `markAsRead(chat_id, user_id, last_read_message_id)`                 | –û–±–Ω–æ–≤–∏—Ç—å last_read_message_id | `void`            |
| `pollMessages(user_id)`                 | –í–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π | `vector<Message>`            |

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ–º **cursor-based** –ø–∞–≥–∏–Ω–∞—Ü–∏—é (`before_id` + `limit`), –Ω–µ offset.
- Offset –ø–ª–æ—Ö–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- Cursor —Å—Ç–∞–±–∏–ª–µ–Ω –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üì¢ Channels (TODO)

| –ú–µ—Ç–æ–¥                                                         | –û–ø–∏—Å–∞–Ω–∏–µ                                 | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç              |
| ------------------------------------------------------------- | ---------------------------------------- | ----------------------- |
| `getChannelById(channel_id)`                                  | –ü–æ–ª—É—á–∏—Ç—å –∫–∞–Ω–∞–ª –ø–æ ID                     | `Channel?`              |
| `getChannelByHandle(handle)`                                  | –ü–æ–ª—É—á–∏—Ç—å –∫–∞–Ω–∞–ª –ø–æ @handle                | `Channel?`              |
| `getUserChannels(user_id)`                                    | –ö–∞–Ω–∞–ª—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | `vector<Channel>`       |
| `createChannel(handle, name, owner_id, is_private?)`          | –°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª                            | `Channel`               |
| `getChannelMembers(channel_id, offset?, limit?)`              | –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –∫–∞–Ω–∞–ª–∞                        | `vector<ChannelMember>` |
| `getChannelMemberCount(channel_id)`                           | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤                   | `int64`                 |
| `joinChannel(channel_id, user_id)`                            | –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª                     | `bool`                  |
| `leaveChannel(channel_id, user_id)`                           | –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –∫–∞–Ω–∞–ª–∞                     | `bool`                  |
| `updateChannelInfo(channel_id, name?, avatar?, description?)` | –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ –∫–∞–Ω–∞–ª–∞                     | `bool`                  |

---

## üìù Posts (TODO)

| –ú–µ—Ç–æ–¥                                                   | –û–ø–∏—Å–∞–Ω–∏–µ                    | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç     |
| ------------------------------------------------------- | --------------------------- | -------------- |
| `getPostById(post_id)`                                  | –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç               | `Post?`        |
| `getChannelPosts(channel_id, before_id?, limit)`        | –ü–æ—Å—Ç—ã –∫–∞–Ω–∞–ª–∞                | `vector<Post>` |
| `createChannelPost(channel_id, text, enable_comments?)` | –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç –≤ –∫–∞–Ω–∞–ª–µ       | `Post`         |
| `editPost(post_id, new_text)`                           | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç          | `bool`         |
| `deletePost(post_id)`                                   | –£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç                | `bool`         |
| `pollPosts(user_id)`                 | –í–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤ | `vector<Post>`            |

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ discussion-—á–∞—Ç–µ.
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Å—Ç–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏:
1. –°–æ–∑–¥–∞—ë—Ç—Å—è —á–∞—Ç —Ç–∏–ø–∞ `discussion`
2. –°–æ–∑–¥–∞—ë—Ç—Å—è "–∫–æ—Ä–Ω–µ–≤–æ–µ" —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —ç—Ç–æ–º —á–∞—Ç–µ
3. `discussion_message_id` –≤ –ø–æ—Å—Ç–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ

---

## üòÄ Reactions (TODO)

| –ú–µ—Ç–æ–¥                                            | –û–ø–∏—Å–∞–Ω–∏–µ                       | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç         |
| ------------------------------------------------ | ------------------------------ | ------------------ |
| `addMessageReaction(message_id, user_id, emoji)` | –ü–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ | `Reaction`         |
| `addPostReaction(post_id, user_id, emoji)`       | –ü–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é –Ω–∞ –ø–æ—Å—Ç      | `Reaction`         |
| `removeReaction(reaction_id)`                    | –£–±—Ä–∞—Ç—å —Ä–µ–∞–∫—Ü–∏—é                 | `bool`             |
| `getMessageReactions(message_id)`                | –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ           | `vector<Reaction>` |
| `getPostReactions(post_id)`                      | –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ø–æ—Å—Ç                | `vector<Reaction>` |

---

## üìé Attachments (TODO)

| –ú–µ—Ç–æ–¥                                                               | –û–ø–∏—Å–∞–Ω–∏–µ                      | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç           |
| ------------------------------------------------------------------- | ----------------------------- | -------------------- |
| `addMessageAttachment(message_id, file_type, file_size, file_path)` | –î–æ–±–∞–≤–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é | `Attachment`         |
| `addPostAttachment(post_id, file_type, file_size, file_path)`       | –î–æ–±–∞–≤–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ –∫ –ø–æ—Å—Ç—É     | `Attachment`         |
| `getMessageAttachments(message_id)`                                 | –í–ª–æ–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è            | `vector<Attachment>` |
| `getPostAttachments(post_id)`                                       | –í–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å—Ç–∞                | `vector<Attachment>` |
| `deleteAttachment(attachment_id)`                                   | –£–¥–∞–ª–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ              | `bool`               |
